<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0107)http://www.jspsmart.com/scripts/showsource/showsource.asp?VPATH=/scripts/demo/jspSmartUpload/en/sample3.jsp -->
<HTML><HEAD>
<META http-equiv=Content-Type content="text/html; charset=windows-1252">
<META content="MSHTML 6.00.2462.0" name=GENERATOR></HEAD>
<BODY><PRE><CODE>&lt;%@&nbsp;page&nbsp;language="java"&nbsp;import="com.jspsmart.upload.*"%&gt; <BR>&lt;jsp:useBean&nbsp;id="mySmartUpload"&nbsp;scope="page"&nbsp;class="com.jspsmart.upload.SmartUpload"&nbsp;/&gt; <BR> <BR>&lt;HTML&gt; <BR>&lt;BODY&nbsp;BGCOLOR="white"&gt; <BR> <BR>&lt;H1&gt;jspSmartUpload&nbsp;:&nbsp;Sample&nbsp;3&lt;/H1&gt; <BR>&lt;HR&gt; <BR> <BR>&lt;% <BR>	 <BR>	//&nbsp;Variables <BR>	&nbsp;&nbsp;&nbsp;int&nbsp;count=0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR> <BR>	//&nbsp;Initialization <BR>		mySmartUpload.initialize(pageContext); <BR> <BR>	//&nbsp;Only&nbsp;allow&nbsp;txt&nbsp;or&nbsp;htm&nbsp;files <BR>	&nbsp;&nbsp;&nbsp;mySmartUpload.setAllowedFilesList("htm,html,txt,,"); <BR> <BR>	//&nbsp;DeniedFilesList&nbsp;can&nbsp;also&nbsp;be&nbsp;used&nbsp;: <BR>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;mySmartUpload.setDeniedFilesList("exe,bat,jsp"); <BR> <BR>	//&nbsp;Deny&nbsp;physical&nbsp;path <BR>	//&nbsp;mySmartUpload.setDenyPhysicalPath(true); <BR> <BR>	//&nbsp;Only&nbsp;allow&nbsp;files&nbsp;smaller&nbsp;than&nbsp;50000&nbsp;bytes <BR>	//&nbsp;mySmartUpload.setMaxFileSize(50000); <BR> <BR>	//&nbsp;Deny&nbsp;upload&nbsp;if&nbsp;the&nbsp;total&nbsp;fila&nbsp;size&nbsp;is&nbsp;greater&nbsp;than&nbsp;200000&nbsp;bytes <BR>	//&nbsp;mySmartUpload.setTotalMaxFileSize(200000); <BR> <BR>	//&nbsp;Upload	 <BR>	&nbsp;&nbsp;&nbsp;mySmartUpload.upload(); <BR> <BR>	//&nbsp;Save&nbsp;the&nbsp;files&nbsp;with&nbsp;their&nbsp;original&nbsp;names&nbsp;in&nbsp;a&nbsp;virtual&nbsp;path&nbsp;of&nbsp;the&nbsp;web&nbsp;server <BR>	&nbsp;&nbsp;&nbsp;try&nbsp;{ <BR> <BR>		&nbsp;count&nbsp;=&nbsp;mySmartUpload.save("/upload",&nbsp;mySmartUpload.SAVE_VIRTUAL); <BR>	&nbsp;&nbsp; <BR>	&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(Exception&nbsp;e){ <BR> <BR>	&nbsp;	&nbsp;out.println("&lt;b&gt;Wrong&nbsp;selection&nbsp;:&nbsp;&lt;/b&gt;"&nbsp;+&nbsp;e.toString()); <BR> <BR>	&nbsp;&nbsp;&nbsp;} <BR>&nbsp;&nbsp;&nbsp;		 <BR>	//&nbsp;Display&nbsp;the&nbsp;number&nbsp;of&nbsp;files&nbsp;uploaded <BR>	&nbsp;&nbsp;&nbsp;out.println(count&nbsp;+&nbsp;"&nbsp;file(s)&nbsp;uploaded."); <BR> <BR>%&gt; <BR>&lt;/BODY&gt; <BR>&lt;/HTML&gt; <BR></CODE></PRE></BODY></HTML>
